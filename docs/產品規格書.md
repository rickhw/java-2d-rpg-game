# M/A Legend - 產品規格書 (Product Requirements Document)

## 1. 專案概述

### 1.1 專案名稱
**M/A Legend** (原名: Rude Boy The Venture)

### 1.2 專案類型
2D 角色扮演遊戲 (2D RPG Adventure Game)

### 1.3 開發技術
- **程式語言**: Java 21
- **圖形框架**: Java Swing / AWT
- **建置工具**: Gradle
- **版本**: v2.16.0

### 1.4 專案目標
開發一款完整的2D像素風格角色扮演遊戲，包含探索、戰鬥、解謎、角色成長等經典RPG元素。

## 2. 核心功能需求

### 2.1 遊戲引擎核心
- **2D遊戲引擎**: 基於Java Swing的自製2D遊戲引擎
- **遊戲循環**: 60 FPS的穩定遊戲循環，使用Delta Time累加器方法
- **渲染系統**: 分層渲染系統（地圖→物件→玩家→NPC→UI）
- **碰撞檢測**: 精確的矩形碰撞檢測系統
- **攝影機系統**: 跟隨玩家的平滑攝影機

### 2.2 玩家系統
- **角色控制**: WASD/方向鍵控制移動
- **角色動畫**: 4方向行走動畫（上下左右）
- **角色屬性**: 
  - 生命值 (Life)
  - 魔力值 (Mana)
  - 等級系統 (Level)
  - 經驗值 (Experience)
  - 攻擊力、防禦力等戰鬥屬性
- **裝備系統**: 武器、防具、道具裝備
- **背包系統**: 4x5格子的物品欄，支援物品堆疊

### 2.3 戰鬥系統
- **即時戰鬥**: 非回合制的即時戰鬥系統
- **武器系統**: 
  - 近戰武器：劍、斧頭、十字鎬
  - 遠程武器：火球等投射物
  - 武器特性：攻擊力、攻擊速度、擊退效果
- **防禦系統**:
  - 防護 (Guard): 減少1/3傷害
  - 格擋 (Parry): 完全反彈攻擊並造成擊退
- **怪物系統**: 多種怪物類型，各有不同AI行為
- **Boss戰**: 特殊Boss怪物，具備多階段戰鬥

### 2.4 世界系統
- **地圖系統**: 
  - 多個地圖區域（世界地圖、地下城B1/B2等）
  - 瓦片式地圖構建
  - 地圖間的無縫切換
- **互動物件**: 
  - 寶箱、門、開關等可互動物件
  - 解謎元素（推石塊、壓力板等）
  - 可破壞物件（樹木、牆壁等）
- **NPC系統**: 
  - 對話系統（支援多行對話、逐字顯示效果）
  - 商店系統（買賣物品）
  - 任務系統

### 2.5 環境系統
- **日夜循環**: Day → Dusk → Night → Dawn 四階段循環
- **照明系統**: 燈籠等照明道具，夜晚環境光線變化
- **天氣效果**: 不同區域的環境效果
- **粒子系統**: 攻擊特效、破壞效果等粒子動畫

### 2.6 音效系統
- **背景音樂**: 不同場景的背景音樂
- **音效**: 攻擊、移動、互動等音效
- **音量控制**: 可調節的音樂和音效音量

### 2.7 介面系統
- **遊戲UI**: 
  - 生命值/魔力值顯示
  - 小地圖系統
  - 世界地圖 (按M鍵)
  - 背包介面
  - 裝備介面
- **選單系統**:
  - 標題畫面
  - 暫停選單
  - 設定選單
  - 遊戲結束畫面
- **對話系統**: 支援NPC對話、劇情文字顯示

### 2.8 存檔系統
- **遊戲存檔**: 玩家狀態、背包、世界物件狀態的完整保存
- **自動存檔**: 特定時機的自動存檔功能
- **讀取存檔**: 完整的遊戲狀態恢復

## 3. 技術需求

### 3.1 系統需求
- **Java版本**: Java 21或以上
- **作業系統**: Windows, macOS, Linux (跨平台)
- **記憶體**: 最少512MB RAM
- **儲存空間**: 約100MB

### 3.2 效能需求
- **幀率**: 穩定60 FPS
- **解析度**: 預設960x576 (16:9比例)，支援全螢幕模式
- **載入時間**: 地圖切換時間小於1秒

### 3.3 相容性需求
- 支援不同螢幕解析度
- 支援全螢幕和視窗模式切換
- 鍵盤輸入相容性

## 4. 遊戲內容規格

### 4.1 角色與怪物
- **玩家角色**: 藍衣男孩主角
- **NPC**: 老人、商人等互動角色
- **怪物類型**:
  - 綠史萊姆 (Green Slime)
  - 紅史萊姆 (Red Slime)  
  - 獸人 (Orc)
  - 蝙蝠 (Bat)
  - 骷髏領主 (Skeleton Lord) - Boss

### 4.2 物品系統
- **武器**: 劍、斧頭、十字鎬、盾牌
- **消耗品**: 生命藥水、魔力藥水
- **道具**: 鑰匙、燈籠、帳篷
- **特殊物品**: 藍心 (BlueHeart) - 傳說寶物

### 4.3 地圖區域
- **世界地圖**: 主要的戶外探索區域
- **地下城B1**: 第一層地下城
- **地下城B2**: 第二層地下城，Boss戰區域
- **室內場景**: 房屋、商店等室內空間

### 4.4 遊戲機制
- **解謎元素**: 推石塊、壓力板、鐵門機關
- **戰鬥機制**: 即時戰鬥、擊退效果、投射物攻擊
- **成長系統**: 經驗值獲得、等級提升、屬性成長
- **探索獎勵**: 寶箱開啟、隱藏物品發現

## 5. 使用者體驗需求

### 5.1 操作體驗
- **直觀控制**: 簡單易懂的WASD移動控制
- **流暢動作**: 角色移動和動畫的流暢性
- **即時反饋**: 攻擊、受傷等動作的即時視覺和聽覺反饋

### 5.2 視覺體驗
- **像素藝術風格**: 16x16像素的復古風格圖像
- **一致的美術風格**: 統一的色彩和設計語言
- **清晰的UI設計**: 易讀的字體和清晰的介面元素

### 5.3 音效體驗
- **沉浸式音效**: 配合遊戲情境的背景音樂和音效
- **音效回饋**: 每個動作都有對應的音效回饋
- **音量控制**: 玩家可自由調節音樂和音效音量

## 6. 品質保證需求

### 6.1 穩定性需求
- **無崩潰**: 正常遊戲過程中不應發生程式崩潰
- **記憶體管理**: 長時間遊戲不應發生記憶體洩漏
- **存檔可靠性**: 存檔和讀檔功能必須100%可靠

### 6.2 效能需求
- **穩定幀率**: 在目標硬體上維持穩定60 FPS
- **快速載入**: 場景切換和遊戲啟動時間優化
- **資源優化**: 合理的記憶體和CPU使用率

### 6.3 相容性需求
- **跨平台**: 在Windows、macOS、Linux上正常運行
- **不同解析度**: 支援常見的螢幕解析度
- **Java版本**: 與Java 21及以上版本相容

## 7. 發布與維護需求

### 7.1 發布格式
- **JAR檔案**: 可執行的JAR檔案格式
- **版本標記**: 清楚的版本號標記 (遵循語意化版本)
- **說明文件**: 完整的README和使用說明

### 7.2 版本管理
- **版本控制**: 使用Git進行版本控制
- **發布流程**: 標準化的版本發布流程
- **更新機制**: 清楚的版本更新說明

### 7.3 文件需求
- **開發文件**: 完整的技術文件和API說明
- **使用手冊**: 玩家使用手冊和操作說明
- **維護文件**: 系統維護和故障排除指南

## 8. 專案里程碑

### 8.1 已完成功能 (v2.16.0)
- ✅ 基礎遊戲引擎和遊戲循環
- ✅ 玩家角色系統和控制
- ✅ 完整的戰鬥系統
- ✅ 多地圖系統和場景切換
- ✅ NPC和對話系統
- ✅ 背包和裝備系統
- ✅ 日夜循環和環境系統
- ✅ 音效和音樂系統
- ✅ 存檔系統
- ✅ Boss戰和過場動畫
- ✅ 遊戲結局

### 8.2 核心特色
- **完整的RPG體驗**: 從角色成長到最終Boss戰的完整遊戲流程
- **豐富的遊戲機制**: 戰鬥、解謎、探索等多元化遊戲玩法
- **精緻的像素藝術**: 復古風格的視覺呈現
- **沉浸式體驗**: 音效、動畫、劇情的完美結合

## 9. 結語

M/A Legend是一款功能完整的2D RPG遊戲，具備現代遊戲的所有基本要素。專案展現了從零開始構建遊戲引擎的完整過程，是學習遊戲開發的優秀範例。遊戲的設計注重玩家體驗，技術實現穩定可靠，適合作為獨立遊戲或教育專案使用。